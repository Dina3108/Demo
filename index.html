<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="CSS/login_page.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KPRIET Hostel Community</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Acme&family=Bangers&family=Big+Shoulders+Stencil:opsz,wght@10..72,100..900&family=Bilbo+Swash+Caps&family=Finger+Paint&family=Fira+Sans+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Handlee&family=Jockey+One&family=Kaushan+Script&family=Kavoon&family=Kite+One&family=Luckiest+Guy&family=Mali:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600;1,700&family=New+Amsterdam&family=Pangolin&family=Patrick+Hand+SC&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Protest+Riot&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik+Doodle+Shadow&family=Rubik+Vinyl&family=Saira:ital,wght@0,100..900;1,100..900&family=Salsa&family=Squada+One&family=Square+Peg&family=Tangerine:wght@400;700&family=Titillium+Web:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700&family=Vibur&family=Waiting+for+the+Sunrise&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="login-div">
      <img
        src="Files/WhatsApp Image 2025-05-04 at 02.30.03_1e964104.jpg"
        class="login-image"
      />
      <div class="log-p-div">
        <div class="div">
          <p class="log-title-p">KPRIET Hostel Community</p>
        </div>
        <div class="div">
          <p class="log-input-top-p">Enter Your Login Details</p>
        </div>
        <div class="log-pass-div">
          <div class="div">
            <input
              type="text"
              placeholder="Enter Your RollNo / ID No "
              class="roll-no-input"
            />
          </div>
          <div class="div">
            <input
              type="text"
              placeholder="Enter Your Password "
              class="password-input"
            />
          </div>
          <p class="password-hint">
            Password Format - DDMM(Last 2 Digits of Roll No) (DOB)
          </p>
          <div class="div">
            <button class="login-button">LOGIN</button>
          </div>
        </div>
      </div>
    </div>
    <script>
      const loginButton = document.querySelector(".login-button");

      loginButton.addEventListener("click", async () => {
        const rollNo = document.querySelector(".roll-no-input").value.trim();
        const password = document.querySelector(".password-input").value.trim();

        if (!rollNo || !password) {
          alert("Please enter both Roll No and Password!");
          return;
        }

        try {
          const response = await fetch("http://localhost:3000/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ rollNo, password }),
          });
          const result = await response.json();

          if (response.ok) {
            alert(result.message);
            window.location.href = result.redirectPage; // Redirect to different page
          } else {
            alert(result.message);
          }
        } catch (error) {
          console.error("Error:", error);
          alert("Something went wrong. Try again later.");
        }
      });
      window.location.href = result.redirectPage; // This will automatically redirect to whatever value is sent by the server
    </script>
  </body>
</html>
